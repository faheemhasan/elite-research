/*!18-09-2014 */
(function(){Cetabo.ContentManager=Cetabo.BaseManager.extend({initialize:function(a){var b;this.config=a,b=this.get("channel"),this.initEditor(),Cetabo.EventDistpatcher.use(b).on("content.change",this.onContentChange,this),Cetabo.EventDistpatcher.use(b).on("content.persist",this.onContentPersit,this),Cetabo.EventDistpatcher.use(b).on("content.hide",this.hideEditor,this),Cetabo.EventDistpatcher.use(b).on("content.show",this.showEditor,this)},onContentChange:function(a,b){this.showEditor(),this.setContent(void 0!==a?a:""),this.setUpdateCallback(b),this.rebindEvents(this)},setUpdateCallback:function(a){this.updateCallback=a},onContentPersit:function(a){a(this.getContent())},initEditor:function(){this.hideEditor(),this.rebindEvents(this)},rebindEvents:function(a){this.getHtmlEditor().keyup(function(){void 0!==a.updateCallback&&a.updateCallback(a.getContent())}),null!==this.getRichEditor()&&(this.getRichEditor().onKeyUp.add(function(){void 0!==a.updateCallback&&a.updateCallback(a.getContent())}),this.getRichEditor().onChange.add(function(){void 0!==a.updateCallback&&a.updateCallback(a.getContent())}))},showEditor:function(){this.getEditorContainer().show()},hideEditor:function(){this.getEditorContainer().hide()},getEditorContainer:function(){return jQuery("#wp-"+this.config.el+"-wrap")},getContent:function(){var a;return a=this.getEditor(),this.isRichEditorActive()?a.getContent():a.val()},setContent:function(a){var b;b=this.getEditor(),void 0!==b&&null!=b&&(this.isRichEditorActive()?b.setContent(a):b.val(a))},isRichEditorActive:function(){return jQuery("#wp-"+this.config.el+"-wrap").hasClass("tmce-active")},getRichEditor:function(){return tinyMCE.activeEditor},getHtmlEditor:function(){return jQuery("#"+this.config.el)},getEditor:function(){return this.isRichEditorActive()?this.getRichEditor():this.getHtmlEditor()}})}).call(this),function(){Cetabo.IconProviderModel=Cetabo.BaseProvider.extend({iconData:[{id:0,imageSrc:"https://mts.googleapis.com/vt/icon/name=icons/spotlight/spotlight-poi.png&scale=1",text:"DEFAULT",description:"Icon default"},{id:1,imageSrc:"{url}/media/images/cetabo_icons/pin_default_blue.png",text:"Default blue",description:"Default blue"},{id:2,imageSrc:"{url}/media/images/cetabo_icons/pin_default_lightblue.png",text:"Default light blue",description:"Default light blue"},{id:3,imageSrc:"{url}/media/images/cetabo_icons/pin_default_purple.png",text:"Default purple",description:"Default purple"},{id:4,imageSrc:"{url}/media/images/cetabo_icons/pin_default_red.png",text:"Default red",description:"Default red"},{id:5,imageSrc:"{url}/media/images/cetabo_icons/pin_default_yellow.png",text:"Default yellow",description:"Default yellow"},{id:6,imageSrc:"{url}/media/images/cetabo_icons/pin_airport_blue.png",text:"Airport blue 1",description:"Airport blue 1"},{id:7,imageSrc:"{url}/media/images/cetabo_icons/pin_airport_blue-2.png",text:"Airport blue 2",description:"Airport blue 2"},{id:8,imageSrc:"{url}/media/images/cetabo_icons/pin_airport_lightblue.png",text:"Airport light blue 1",description:"Airport light blue 1"},{id:9,imageSrc:"{url}/media/images/cetabo_icons/pin_airport_lightblue-2.png",text:"Airport light blue 2",description:"Airport light blue 2"},{id:10,imageSrc:"{url}/media/images/cetabo_icons/pin_airport_purple.png",text:"Airport purple 1",description:"Airport purple 1"},{id:11,imageSrc:"{url}/media/images/cetabo_icons/pin_airport_purple-2.png",text:"Airport purple 2",description:"Airport purple 2"},{id:12,imageSrc:"{url}/media/images/cetabo_icons/pin_airport_red.png",text:"Airport red 1",description:"Airport red 1"},{id:13,imageSrc:"{url}/media/images/cetabo_icons/pin_airport_red-2.png",text:"Airport red 2",description:"Airport red 2"},{id:14,imageSrc:"{url}/media/images/cetabo_icons/pin_airport_yellow.png",text:"Airport yellow 1",description:"Airport yellow 1"},{id:15,imageSrc:"{url}/media/images/cetabo_icons/pin_airport_yellow-2.png",text:"Airport yellow 2",description:"Airport yellow 2"},{id:16,imageSrc:"{url}/media/images/cetabo_icons/pin_car_blue.png",text:"Car blue 1",description:"Car blue 1"},{id:17,imageSrc:"{url}/media/images/cetabo_icons/pin_car_blue-2.png",text:"Car blue 2",description:"Car blue 2"},{id:18,imageSrc:"{url}/media/images/cetabo_icons/pin_car_ligthblue.png",text:"Car light blue 1",description:"Car light blue 1"},{id:19,imageSrc:"{url}/media/images/cetabo_icons/pin_car_lightblue-2.png",text:"Car light blue 2",description:"Car light blue 2"},{id:20,imageSrc:"{url}/media/images/cetabo_icons/pin_car_purple.png",text:"Car purple 1",description:"Car purple 1"},{id:21,imageSrc:"{url}/media/images/cetabo_icons/pin_car_purple-2.png",text:"Car purple 2",description:"Car purple 2"},{id:22,imageSrc:"{url}/media/images/cetabo_icons/pin_car_red.png",text:"Car red 1",description:"Car red 1"},{id:23,imageSrc:"{url}/media/images/cetabo_icons/pin_car_red-2.png",text:"Car red 2",description:"Car red 2"},{id:24,imageSrc:"{url}/media/images/cetabo_icons/pin_car_yellow.png",text:"Car yellow 1",description:"Car yellow 1"},{id:25,imageSrc:"{url}/media/images/cetabo_icons/pin_car_yellow-2.png",text:"Car yellow 2",description:"Car yellow 2"},{id:26,imageSrc:"{url}/media/images/cetabo_icons/pin_cart_blue.png",text:"Cart blue 1",description:"Cart blue 1"},{id:27,imageSrc:"{url}/media/images/cetabo_icons/pin_cart_blue-2.png",text:"Cart blue 2",description:"Cart blue 2"},{id:28,imageSrc:"{url}/media/images/cetabo_icons/pin_cart_lightblue.png",text:"Cart light blue 1",description:"Cart light blue 1"},{id:29,imageSrc:"{url}/media/images/cetabo_icons/pin_cart_lightblue-2.png",text:"Cart light blue 2",description:"Cart light blue 2"},{id:30,imageSrc:"{url}/media/images/cetabo_icons/pin_cart_purple.png",text:"Cart purple 1",description:"Cart purple 1"},{id:31,imageSrc:"{url}/media/images/cetabo_icons/pin_cart_purple-2.png",text:"Cart purple 2",description:"Cart purple 2"},{id:32,imageSrc:"{url}/media/images/cetabo_icons/pin_cart_red.png",text:"Cart red 1",description:"Cart red 1"},{id:33,imageSrc:"{url}/media/images/cetabo_icons/pin_cart_red-2.png",text:"Cart red 2",description:"Cart red 2"},{id:34,imageSrc:"{url}/media/images/cetabo_icons/pin_cart_yellow.png",text:"Cart yellow 1",description:"Cart yellow 1"},{id:35,imageSrc:"{url}/media/images/cetabo_icons/pin_cart_yellow-2.png",text:"Cart yellow 2",description:"Cart yellow 2"},{id:36,imageSrc:"{url}/media/images/cetabo_icons/pin_coffee_blue.png",text:"Coffee blue 1",description:"Coffee blue 1"},{id:37,imageSrc:"{url}/media/images/cetabo_icons/pin_coffee_blue-2.png",text:"Coffee blue 2",description:"Coffee blue 2"},{id:38,imageSrc:"{url}/media/images/cetabo_icons/pin_coffee_lightblue.png",text:"Coffee light blue 1",description:"Coffee light blue 1"},{id:39,imageSrc:"{url}/media/images/cetabo_icons/pin_coffee_lightblue-2.png",text:"Coffee light blue 2",description:"Coffee light blue 2"},{id:40,imageSrc:"{url}/media/images/cetabo_icons/pin_coffee_purple.png",text:"Coffee purple 1",description:"Coffee purple 1"},{id:41,imageSrc:"{url}/media/images/cetabo_icons/pin_coffee_purple-2.png",text:"Coffee purple 2",description:"Coffee purple 2"},{id:42,imageSrc:"{url}/media/images/cetabo_icons/pin_coffee_red.png",text:"Coffee red 1",description:"Coffee red 1"},{id:43,imageSrc:"{url}/media/images/cetabo_icons/pin_coffee_red-2.png",text:"Coffee red 2",description:"Coffee red 2"},{id:44,imageSrc:"{url}/media/images/cetabo_icons/pin_coffee_yellow.png",text:"Coffee yellow 1",description:"Coffee yellow 1"},{id:45,imageSrc:"{url}/media/images/cetabo_icons/pin_coffee_yellow-2.png",text:"Coffee yellow 2",description:"Coffee yellow 2"},{id:46,imageSrc:"{url}/media/images/cetabo_icons/pin_gas_station_blue.png",text:"Gas station blue 1",description:"Gas station blue 1"},{id:47,imageSrc:"{url}/media/images/cetabo_icons/pin_gas_station_blue-2.png",text:"Gas station blue 2",description:"Gas station blue 2"},{id:48,imageSrc:"{url}/media/images/cetabo_icons/pin_gas_station_lightblue.png",text:"Gas station light blue 1",description:"Gas station light blue 1"},{id:49,imageSrc:"{url}/media/images/cetabo_icons/pin_gas_station_lightblue-2.png",text:"Gas station light blue 2",description:"Gas station light blue 2"},{id:50,imageSrc:"{url}/media/images/cetabo_icons/pin_gas_station_purple.png",text:"Gas station purple 1",description:"Gas station purple 1"},{id:51,imageSrc:"{url}/media/images/cetabo_icons/pin_gas_station_purple-2.png",text:"Gas station purple 2",description:"Gas station purple 2"},{id:52,imageSrc:"{url}/media/images/cetabo_icons/pin_gas_station_red.png",text:"Gas station red 1",description:"Gas station red 1"},{id:53,imageSrc:"{url}/media/images/cetabo_icons/pin_gas_station_red-2.png",text:"Gas station red 2",description:"Gas station red 2"},{id:54,imageSrc:"{url}/media/images/cetabo_icons/pin_gas_station_yellow.png",text:"Gas station yellow 1",description:"Gas station yellow 1"},{id:55,imageSrc:"{url}/media/images/cetabo_icons/pin_gas_station_yellow-2.png",text:"Gas station yellow 2",description:"Gas station yellow 2"},{id:56,imageSrc:"{url}/media/images/cetabo_icons/pin_home_blue.png",text:"Home blue 1",description:"Home blue 1"},{id:57,imageSrc:"{url}/media/images/cetabo_icons/pin_home_blue-2.png",text:"Home blue 2",description:"Home blue 2"},{id:58,imageSrc:"{url}/media/images/cetabo_icons/pin_home_lightblue.png",text:"Home light blue 1",description:"Home light blue 1"},{id:59,imageSrc:"{url}/media/images/cetabo_icons/pin_home_lightblue-2.png",text:"Home light blue 2",description:"Home light blue 2"},{id:60,imageSrc:"{url}/media/images/cetabo_icons/pin_home_purple.png",text:"Home purple 1",description:"Home purple 1"},{id:61,imageSrc:"{url}/media/images/cetabo_icons/pin_home_purple-2.png",text:"Home purple 2",description:"Home purple 2"},{id:62,imageSrc:"{url}/media/images/cetabo_icons/pin_home_red.png",text:"Home red 1",description:"Home red 1"},{id:63,imageSrc:"{url}/media/images/cetabo_icons/pin_home_red-2.png",text:"Home red 2",description:"Home red 2"},{id:64,imageSrc:"{url}/media/images/cetabo_icons/pin_home_yellow.png",text:"Home yellow 1",description:"Home yellow 1"},{id:65,imageSrc:"{url}/media/images/cetabo_icons/pin_home_yellow-2.png",text:"Home yellow 2",description:"Home yellow 2"},{id:66,imageSrc:"{url}/media/images/cetabo_icons/pin_plus_blue.png",text:"Plus blue 1",description:"Plus blue"},{id:67,imageSrc:"{url}/media/images/cetabo_icons/pin_plus_lightblue.png",text:"Plus light blue 1",description:"Plus light blue"},{id:68,imageSrc:"{url}/media/images/cetabo_icons/pin_plus_purple.png",text:"Plus purple",description:"Plus purple"},{id:69,imageSrc:"{url}/media/images/cetabo_icons/pin_plus_red.png",text:"Plus red",description:"Plus red"},{id:70,imageSrc:"{url}/media/images/cetabo_icons/pin_plus_yellow.png",text:"Plus yellow",description:"Plus yellow"},{id:71,imageSrc:"{url}/media/images/cetabo_icons/pin_star_blue.png",text:"Star blue 1",description:"Star blue 1"},{id:72,imageSrc:"{url}/media/images/cetabo_icons/pin_star_blue-2.png",text:"Star blue 2",description:"Star blue 2"},{id:73,imageSrc:"{url}/media/images/cetabo_icons/pin_star_lightblue.png",text:"Star lightblue 1",description:"Star lightblue 1"},{id:74,imageSrc:"{url}/media/images/cetabo_icons/pin_star_lightblue-2.png",text:"Star lightblue 2",description:"Star lightblue 2"},{id:75,imageSrc:"{url}/media/images/cetabo_icons/pin_star_purple.png",text:"Star purple 1",description:"Star purple 1"},{id:76,imageSrc:"{url}/media/images/cetabo_icons/pin_star_purple-2.png",text:"Star purple 2",description:"Star purple 2"},{id:77,imageSrc:"{url}/media/images/cetabo_icons/pin_star_red.png",text:"Star red 1",description:"Star red 1"},{id:78,imageSrc:"{url}/media/images/cetabo_icons/pin_star_red-2.png",text:"Star red 2",description:"Star red 2"},{id:79,imageSrc:"{url}/media/images/cetabo_icons/pin_star_yellow.png",text:"Star yellow 1",description:"Star yellow 1"},{id:80,imageSrc:"{url}/media/images/cetabo_icons/pin_star_yellow-2.png",text:"Star yellow 2",description:"Star yellow 2"},{id:81,imageSrc:"{url}/media/images/cetabo_icons/pin_tools_blue.png",text:"Tools blue 1",description:"Tools blue 1"},{id:82,imageSrc:"{url}/media/images/cetabo_icons/pin_tools_blue-2.png",text:"Tools blue 2",description:"Tools blue 2"},{id:83,imageSrc:"{url}/media/images/cetabo_icons/pin_tools_lightblue.png",text:"Tools light blue 1",description:"Tools light blue 1"},{id:84,imageSrc:"{url}/media/images/cetabo_icons/pin_tools_ligthblue-2.png",text:"Tools light blue 2",description:"Tools light blue 2"},{id:85,imageSrc:"{url}/media/images/cetabo_icons/pin_tools_purple.png",text:"Tools purple 1",description:"Tools purple 1"},{id:86,imageSrc:"{url}/media/images/cetabo_icons/pin_tools_purple-2.png",text:"Tools purple 2",description:"Tools purple 2"},{id:87,imageSrc:"{url}/media/images/cetabo_icons/pin_tools_red.png",text:"Tools red 1",description:"Tools red 1"},{id:88,imageSrc:"{url}/media/images/cetabo_icons/pin_tools_red-2.png",text:"Tools red 2",description:"Tools red 2"},{id:89,imageSrc:"{url}/media/images/cetabo_icons/pin_tools_yellow.png",text:"Tools yellow 1",description:"Tools yellow 1"},{id:90,imageSrc:"{url}/media/images/cetabo_icons/pin_tools_yellow-2.png",text:"Tools yellow 2",description:"Tools yellow 2"}],initialize:function(a){var b,c;for(b=0;b<this.iconData.length;)c=this.iconData[b],c.hidden!==!0&&(c.imageSrc=c.imageSrc.replace("{url}",a)),b++;this.setData(this.iconData)},getById:function(a){var b;for(b=0;b<this.iconData.length;){if(this.iconData[b].id===parseInt(a))return this.iconData[b];b++}return void 0}})}.call(this),function(){Cetabo.MapVisibilityProviderModel=Cetabo.BaseProvider.extend({initialize:function(){var a;a=[{id:"on",text:"On",description:"Show feature"},{id:"off",text:"Off",description:"Hide feature"},{id:"simplified ",text:"Simplified",description:"Removes some style features from the affected features"}],this.setData(a)},getDefault:function(){return"on"}})}.call(this),function(){Cetabo.MapModeProvierModel=Cetabo.BaseProvider.extend({initialize:function(){var a;a=[{text:"MAP",id:google.maps.MapMode.MAP,description:"Displays the default map mode"},{text:"STREET",id:google.maps.MapMode.STREET,description:"Displays street view mode"}],this.setData(a)}})}.call(this),function(){Cetabo.MapTypeProviderModel=Cetabo.BaseProvider.extend({initialize:function(){var a;a=[{text:"ROADMAP",id:google.maps.MapTypeId.ROADMAP,description:"Displays the default road map view"},{text:"SATELLITE",id:google.maps.MapTypeId.SATELLITE,description:"Displays Google Earth satellite images"},{text:"HYBRID",id:google.maps.MapTypeId.HYBRID,description:"Displays a mixture of normal and satellite views"},{text:"TERRAIN",id:google.maps.MapTypeId.TERRAIN,description:"Displays a physical map based on terrain information"}],this.setData(a)}})}.call(this),function(){Cetabo.PlaceAnimationTypeProviderModel=Cetabo.BaseProvider.extend({initialize:function(){var a;a=[{text:"NONE",id:0,description:"No animantion"},{text:"BOUNCE",id:google.maps.Animation.BOUNCE,description:"Repeated bouncing animation"},{text:"DROP",id:google.maps.Animation.DROP,description:"Dropping from sky animation"}],this.setData(a)}})}.call(this),function(){Cetabo.MapControlPostionProviderModel=Cetabo.BaseProvider.extend({initialize:function(){var a;a=[{id:google.maps.ControlPosition.BOTTOM_CENTER,description:"Elements are positioned in the center of the bottom row",text:"BOTTOM CENTER"},{id:google.maps.ControlPosition.BOTTOM_LEFT,description:"Elements are positioned in the bottom left and flow towards the middle. Elements are positioned to the right of the Google logo",text:"BOTTOM LEFT"},{id:google.maps.ControlPosition.BOTTOM_RIGHT,description:"Elements are positioned in the bottom right and flow towards the middle. Elements are positioned to the left of the copyrights",text:"BOTTOM RIGHT"},{id:google.maps.ControlPosition.LEFT_BOTTOM,description:"Elements are positioned on the left, above bottom-left elements, and flow upwards",text:"LEFT BOTTOM"},{id:google.maps.ControlPosition.LEFT_CENTER,description:"Elements are positioned in the center of the left side",text:"LEFT CENTER"},{id:google.maps.ControlPosition.LEFT_TOP,description:"Elements are positioned on the left, below top-left elements, and flow downwards",text:"LEFT TOP"},{id:google.maps.ControlPosition.RIGHT_BOTTOM,description:"Elements are positioned on the right, above bottom-right elements, and flow upwards",text:"RIGHT BOTTOM"},{id:google.maps.ControlPosition.RIGHT_CENTER,description:"Elements are positioned in the center of the right side",text:"RIGHT CENTER"},{id:google.maps.ControlPosition.RIGHT_TOP,description:"Elements are positioned on the right, below top-right elements, and flow downwards",text:"RIGHT TOP"},{id:google.maps.ControlPosition.TOP_CENTER,description:"Elements are positioned in the center of the top row",text:"TOP_CENTER"},{id:google.maps.ControlPosition.TOP_LEFT,description:"Elements are positioned in the top left and flow towards the middle",text:"TOP LEFT"},{id:google.maps.ControlPosition.TOP_RIGHT,description:"Elements are positioned in the top right and flow towards the middle",text:"TOP RIGHT"}],this.setData(a)}})}.call(this),function(){Cetabo.ElementProviderMapModel=Cetabo.BaseProvider.extend({initialize:function(){var a;a=[{text:"all",id:"all",description:"Apply the rule to all elements of the specified feature."},{text:"geometry",id:"geometry",description:"Apply the rule to the feature's geometry."},{text:"geometry.fill",id:"geometry.fill",description:"Apply the rule to the fill of the feature's geometry."},{text:"geometry.stroke",id:"geometry.stroke",description:"Apply the rule to the stroke of the feature's geometry."},{text:"labels",id:"labels",description:"Apply the rule to the feature's labels."},{text:"labels.icon",id:"labels.icon",description:"Apply the rule to icons within the feature's lab"},{text:"labels.text",id:"labels.text",description:"Apply the rule to the text in the feature's labe"},{text:"labels.text.fill",id:"labels.text.fill",description:"Apply the rule to the fill of the text in the feature's labels."},{text:"labels.text.stroke",id:"labels.text.stroke",description:"Apply the rule to the stroke of the text in the feature"}],this.setData(a)},getDefault:function(){return void 0}})}.call(this),function(){Cetabo.FeatureProviderMapModel=Cetabo.BaseProvider.extend({initialize:function(){var a;a=[{id:"administrative",text:"administrative",description:"Apply the rule to administrative areas."},{id:"administrative.country",text:"administrative.country",description:"Apply the rule to countries."},{id:"administrative.land_parcel",text:"administrative.land_parcel",description:"Apply the rule to land parcels."},{id:"administrative.locality",text:"administrative.locality",description:"Apply the rule to localities."},{id:"administrative.neighborhood",text:"administrative.neighborhood",description:"Apply the rule to neighborhoods."},{id:"administrative.province",text:"administrative.province",description:"Apply the rule to provinces."},{id:"all",text:"all",description:"Apply the rule to all selector types."},{id:"landscap",text:"landscap",description:"Apply the rule to landscapes."},{id:"landscape.man_made",text:"landscape.man_made",description:"Apply the rule to man made structures."},{id:"landscape.natural",text:"landscape.natural",description:"Apply the rule to natural features."},{id:"landscape.natural.landcover",text:"landscape.natural.landcover",description:"Apply the rule to landcover."},{id:"landscape.natural.terrain	",text:"landscape.natural.terrain	",description:"Apply the rule to terrain."},{id:"poi",text:"poi",description:"Apply the rule to points of interest."},{id:"poi.attraction",text:"poi.attraction",description:"Apply the rule to attractions for tourist"},{id:"poi.business",text:"poi.business",description:"Apply the rule to businesses."},{id:"poi.government",text:"poi.government",description:"Apply the rule to government buildings."},{id:"poi.medical",text:"poi.medical",description:"Apply the rule to emergency services (hospi"},{id:"poi.park",text:"poi.park",description:"Apply the rule to parks."},{id:"poi.place_of_worship",text:"poi.place_of_worship",description:"Apply the rule to places of worship, such as church, temple, or mosque."},{id:"poi.school",text:"poi.school",description:"Apply the rule to schools."},{id:"poi.sports_complex",text:"poi.sports_complex",description:"Apply the rule to sports complexes."},{id:"road",text:"road",description:"Apply the rule to all roads."},{id:"road.arterial",text:"road.arterial",description:"Apply the rule to arterial roads."},{id:"road.highway",text:"road.highway",description:"Apply the rule to highways."},{id:"road.highway.controlled_access",text:"road.highway.controlled_access",description:"Apply the rule to controlled-access highways."},{id:"road.local",text:"road.local",description:"Apply the rule to local roads."},{id:"transit",text:"transit",description:"Apply the rule to all transit stations and lines."},{id:"transit.line",text:"transit.line",description:"Apply the rule to transit lines."},{id:"transit.station",text:"transit.station",description:"Apply the rule to all transit stations."},{id:"transit.station.airport",text:"transit.station.airport",description:"Apply the rule to airports."},{id:"transit.station.bus",text:"transit.station.bus",description:"Apply the rule to bus stops."},{id:"transit.station.rail",text:"transit.station.rail",description:"Apply the rule to rail stations."},{id:"water",text:"water",description:"Apply the rule to bodies of water."}],this.setData(a)},getDefault:function(){return void 0}})}.call(this),function(){Cetabo.ThemeProvierModel=Cetabo.BaseProvider.extend({initialize:function(a){this.channel=a.channel,this.url=a.url},invoke:function(a){var b;b=this,Cetabo.EventDistpatcher.use(this.channel).trigger("backend.send",{url:this.url,callback:{success:function(c){b.setData(c.themes),a()}}})}})}.call(this),function(){Cetabo.AbstractAccordionView=Cetabo.BaseView.extend({events:{"click .add":"addNew","click .remove":"remove"},getAccordion:function(){return jQuery(this.getAccordionIdentifier())},getAccordionIdentifier:function(){return"#"+this.getElId()+" .accordion"},initAccordionControl:function(){this.getAccordion().accordion(),this.bindListeners()},bindListeners:function(){var a;a=this,this.getAccordion().on("accordionactivate",function(){var b;b=a.getActiveIndex(),a.onExpand(b)}),this.getAccordion().on("accordionbeforeactivate",function(){var b;b=a.getActiveIndex(),a.onPreexpand(b)})},getActiveIndex:function(){return this.getAccordion().accordion("option","active")},onExpand:function(){},onPreexpand:function(){},resolveAccordionIndexById:function(a){var b;return b=0,this.getAccordion().children(".accordion-content").each(function(c){a===this.id&&(b=c)}),b},resolveAccordionIdByIndex:function(a){var b;return b=void 0,this.getAccordion().children(".accordion-content").each(function(c){a===c&&(b=this.id)}),b},getDataModelAtIndex:function(a){return this.modelReference[a]},buildAccordionElementIdentifier:function(){return"ident"+Math.floor(1e5*Math.random())},addNew:function(){var a,b;return b=this.buildAccordionElementIdentifier(),a=this.createAccordionElement(b),this.getAccordion().append(a),this.createAccordionElementDataModel(b),this.afterElementCreation(b),this.refresh(),this.afterElementAdded(b),b},bindModel:function(a){var b,c;c=a,b=this.createAccordionElement(c),this.getAccordion().append(b),this.afterElementCreation(c),this.refresh(),this.afterElementAdded(c)},refresh:function(){this.getAccordion().accordion("refresh")},createAccordionElement:function(){},createAccordionElementDataModel:function(){},afterElementCreation:function(){},afterElementAdded:function(){},remove:function(a){var b,c;c=a.currentTarget,b=jQuery(c).attr("identif"),jQuery(a.currentTarget).parent("h3").next("div").andSelf().remove(),this.getAccordion().accordion("refresh"),this.afterElementRemoval(b),0===this.getElementsCount()&&this.onClear()},removeAll:function(){this.getAccordion().html(""),this.getAccordion().accordion("refresh")},getElementsCount:function(){var a;return a=this.getAccordion().children(".accordion-content"),void 0!==a?a.length:0},onClear:function(){},afterElementRemoval:function(){},expand:function(a){var b;b=this.resolveAccordionIndexById(a),this.getAccordion().accordion("option","active",b)}})}.call(this),function(){Cetabo.StylerView=Cetabo.AbstractAccordionView.extend({events:function(){return _.extend({},Cetabo.AbstractAccordionView.prototype.events,{"click .apply":"apply","click .save-theme":"saveTheme"})},initialize:function(a){this.initAccordionControl(),this.model=a.model,this.channel=a.channel,this.config=a,this.elementProviderModel=new Cetabo.ElementProviderMapModel,this.featureProviderModel=new Cetabo.FeatureProviderMapModel,this.mapVisibilityProviderModel=new Cetabo.MapVisibilityProviderModel,this.componentFactory=new Cetabo.ComponentFactory,Cetabo.EventDistpatcher.use(this.channel).on("map.load",this.onLoadMap,this),this.initThemeSelector(a)},onLoadMap:function(a){this.updateAccordionFromModel(a)},updateAccordionFromModel:function(a){var b,c;c=a.get("stylers");for(b in c)this.bindModel(b,c[b]),this.updateStylerHeader(c[b])},afterElementCreation:function(a){var b;b=this.getStylerById(a),this.initStylerElementSelector(b),this.initStylerFeatureSelector(b),this.initStylerVisiblitySelector(b),this.initStylerColorPicker(b),this.initStylerSaturationSelector(b),this.initStylerLightnessSelector(b),this.initStylerGammaSelector(b)},initStylerGammaSelector:function(a){var b;b=this,jQuery("#"+a.get("id")+" .gamma").val(a.getStyler("gamma")),jQuery("#"+a.get("id")+" .gamma").spinner({step:.01,min:.01,max:10,numberFormat:"n",change:function(){var c;c=this.value,a.setStyler("gamma",c),b.apply()},stop:function(){var c;c=this.value,a.setStyler("gamma",c),b.apply()}})},initStylerLightnessSelector:function(a){var b;jQuery("#"+a.get("id")+" .lightness").val(a.getStyler("lightness")),b=this,jQuery("#"+a.get("id")+" .lightness").spinner({step:1,min:-100,max:100,numberFormat:"n",change:function(){var c;c=this.value,a.setStyler("lightness",c),b.apply()},stop:function(){var c;c=this.value,a.setStyler("lightness",c),b.apply()}})},initStylerSaturationSelector:function(a){var b;jQuery("#"+a.get("id")+" .saturation").val(a.getStyler("saturation")),b=this,jQuery("#"+a.get("id")+" .saturation").spinner({step:1,min:-100,max:100,numberFormat:"n",change:function(){var c;c=this.value,a.setStyler("saturation",c),b.apply()},stop:function(){var c;c=this.value,a.setStyler("saturation",c),b.apply()}})},initStylerVisiblitySelector:function(a){var b;null==a.getStyler("visibility")&&a.setStyler("visibility","on"),b=this,b.changeStylerVisiblity(a,a.getStyler("visibility")),new Cetabo.Select2Adaptor({el:"#"+a.get("id")+" .visibility",provider:this.mapVisibilityProviderModel,onMatchSelection:function(b){return void 0!==b&&b.id===a.getStyler("visibility")},onFormatResult:function(a){return"<div class='place-icon-selector'>"+a.text+"<div class='description'>"+a.description+"</div></div>"},onFormatSelection:function(a){return a.text},onSelect:function(c){a.setStyler("visibility",c.id),b.changeStylerVisiblity(a,c.id),b.apply()}})},initThemeSelector:function(a){var b,c;c=this,b=this.channel,this.componentFactory.create("select","theme",{el:this.findIdent(".theme"),provider:new Cetabo.ThemeProvierModel({url:a.url.themes,channel:this.channel}),onChange:function(a,d){Cetabo.EventDistpatcher.use(b).trigger("backend.send",{url:d.url,callback:{success:function(a){c.removeAll(),c.model.fillStylerModelFromTheme(a),c.updateAccordionFromModel(c.model),c.apply()}}})}})},changeStylerVisiblity:function(a,b){"off"===b?jQuery("#"+a.get("id")+" .visibility-bound").hide():jQuery("#"+a.get("id")+" .visibility-bound").show()},initStylerCheckBoxes:function(a){var b;b=this,jQuery("#"+a.get("id")+" .visibility").change(function(){var c;c=jQuery(this).is(":checked"),a.setStyler("visibility",c?"on":"off"),b.apply()}),jQuery("#"+a.get("id")+" .inverse-lightness").change(function(){var c;c=jQuery(this).is(":checked"),a.setStyler("inverse",c),b.apply()})},initStylerColorPicker:function(a){var b,c;c=this,b=jQuery("#"+a.get("id")+" .color"),b.val(a.getStyler("color")),b.change(function(){var b;b=jQuery(this).val(),a.setStyler("color","#"+b),c.apply()}),jscolor.bind()},initStylerElementSelector:function(a){var b;b=this,new Cetabo.Select2Adaptor({el:"#"+a.get("id")+" .element-type",provider:this.elementProviderModel,onMatchSelection:function(b){return void 0!==b&&b.id===a.get("elementType")},onFormatResult:function(a){return"<div class='place-icon-selector'>"+a.text+"<div class='description'>"+a.description+"</div></div>"},onFormatSelection:function(a){return a.text},onSelect:function(c){a.set("elementType",c.id),b.apply()}})},initStylerFeatureSelector:function(a){var b;b=this,new Cetabo.Select2Adaptor({el:"#"+a.get("id")+" .feature-type",provider:this.featureProviderModel,onMatchSelection:function(b){return void 0!==b&&b.id===a.get("featureType")},onFormatResult:function(a){return"<div class='place-icon-selector'>"+a.text+"<div class='description'>"+a.description+"</div></div>"},onFormatSelection:function(a){return a.text},onSelect:function(c){a.set("featureType",c.id),b.apply(),b.updateStylerHeader(a)}})},updateStylerHeader:function(a){var b,c;c=a.get("id"),b=a.get("featureType"),void 0!==b&&jQuery("#name-lable-"+c).html(a.get("featureType"))},getStylerById:function(a){return this.model.getStylerById(a)},createAccordionElement:function(a){var b;return(b=Cetabo.TemplateManager.getTemplateByName("#template-style"))({id:a})},createAccordionElementDataModel:function(a){var b;b=new Cetabo.StylerModel({id:a,channel:this.getChannel()}),this.model.addStyler(a,b)},afterElementRemoval:function(a){this.model.removeStyler(a),this.apply()},apply:function(){var a;a=this.getChannel(),Cetabo.EventDistpatcher.use(a).trigger("styler.update",this.model.buildMapStyler())},saveTheme:function(){var a,b;a=this.channel,b=this,Cetabo.EventDistpatcher.use(a).trigger("backend.send",{url:this.config.url.persist_theme,content:{theme:this.model.getStylersAsTheme()},callback:{success:function(c){void 0===c||c.success!==!0?Cetabo.EventDistpatcher.use(a).trigger("notification.show","Theme was not saved, an error has occurred"):(Cetabo.EventDistpatcher.use(a).trigger("notification.show","Theme "+c.theme_name+" was successfully saved"),b.initThemeSelector())}}})}})}.call(this),function(){Cetabo.PlacesView=Cetabo.AbstractAccordionView.extend({events:function(){return _.extend({},Cetabo.AbstractAccordionView.prototype.events,{})},initialize:function(a){var b;this.initAccordionControl(),this.model=a.model,this.channel=a.channel,this.iconProviderModel=new Cetabo.IconProviderModel(a.baseURL),this.placeAnimationTypeProviderModel=new Cetabo.PlaceAnimationTypeProviderModel,this.iconSelectors=[],this.animationSelectors=[],b=this.getChannel(),this.componentFactory=new Cetabo.ComponentFactory,Cetabo.EventDistpatcher.use(b).on("place.select",this.onFocusPlace,this),Cetabo.EventDistpatcher.use(b).on("map.load",this.onLoadMap,this)},onFocusPlace:function(a){var b;b=a.get("id"),this.expand(b)},onLoadMap:function(a){var b,c,d;d=a.getPlacesByAttribute("type",[void 0,"default"]),c=void 0;for(b in d)void 0===c&&(c=d[b]),this.bindModel(b,d[b]);this.updateContentEditor(c)},getPlaceById:function(a){return this.model.getPlaceById(a)},afterElementCreation:function(a){var b,c;c=this.getPlaceById(a),this.initIconSelector(c),this.initAnimationSelector(c),this.initNameInput(c),this.initLocationInput(c),this.initFileUploader(c),this.initTagsInput(c),b=this.getChannel(),Cetabo.EventDistpatcher.use(b).trigger("place.add",c)},afterElementAdded:function(a){var b;b=this.getPlaceById(a),this.onFocusPlace(b),this.updateContentEditor(b)},initNameInput:function(a){var b;b=jQuery("#"+a.get("id")+" .name"),b.val(a.get("name")),jQuery("#name-lable-"+a.get("id")).html(a.get("name")),b.change(function(){var b;b=jQuery(this).val(),a.set("name",b),jQuery("#name-lable-"+a.get("id")).html(b)
})},initTagsInput:function(a){var b,c;b=this.getChannel(),c=jQuery("#"+a.get("id")+" .tags"),c.val(a.get("tags")),c.tagsInput({onChange:function(){var c;c=jQuery(this).val(),a.set("tags",c),Cetabo.EventDistpatcher.use(b).trigger("place.updateTag",a)}})},initLocationInput:function(a){var b,c;c=jQuery("#"+a.get("id")+" .lng"),c.val(a.get("lng")),c.change(function(){var b;b=jQuery(this).val(),a.set("lng",b)}),b=jQuery("#"+a.get("id")+" .lat"),b.val(a.get("lat")),b.change(function(){var b;b=jQuery(this).val(),a.set("lat",b)})},initFileUploader:function(a){var b,c;b=this.getChannel(),c=this.iconProviderModel,this.fileUploader=new Cetabo.FileUploaderAdaptor({el:"#"+a.get("id")+" .custom",onSelectAttachment:function(d){var e;void 0!==d&&(e={id:d.id,imageSrc:d.url,description:d.description,text:d.title},c.getData().push(e),Cetabo.EventDistpatcher.use(b).trigger("select2.update",d),jQuery("#"+a.get("id")+" .icon").select2("val",d.id),a.set("icon",e.imageSrc),a.set("iconCustomName",e.text),a.set("iconCustomId",e.id),Cetabo.EventDistpatcher.use(b).trigger("place.update",a))}})},initIconSelector:function(a){var b;this.updatePlaceIconIfEmpty(a),this.updateIconProviderModelIfRequired(a),b=this.getChannel(),this.iconSelectors[a.get("id")]=new Cetabo.Select2Adaptor({el:"#"+a.get("id")+" .icon",provider:this.iconProviderModel,channel:b,onMatchSelection:function(b){return void 0!==b&&b.imageSrc===a.get("icon")},onFormatResult:function(a){return"<div class='place-icon-selector'><img class='icon' src='"+a.imageSrc+"'/>"+a.text+"<div class='description'>"+a.description+"</div></div>"},onFormatSelection:function(a){return a.text},onSelect:function(c){a.set("icon",c.imageSrc),a.set("iconCustomName",c.text),a.set("iconCustomId",c.id),Cetabo.EventDistpatcher.use(b).trigger("place.update",a)}})},updatePlaceIconIfEmpty:function(a){var b,c;""===a.get("icon")&&(c=this.iconProviderModel.getById(a.get("iconCustomId")),null!=c?(b=this.getChannel(),a.set("icon",c.imageSrc),Cetabo.EventDistpatcher.use(b).trigger("place.update",a)):(c=this.iconProviderModel.getById(0),a.set("icon",c.imageSrc),a.set("iconCustomName",c.text),a.set("iconCustomId",c.id)))},initAnimationSelector:function(a){var b;b=this.getChannel(),this.componentFactory.create("select",a.get("id"),{el:jQuery("#"+a.get("id")+" .animation"),provider:this.placeAnimationTypeProviderModel,value:parseInt(a.get("animation")),onChange:function(c){a.set("animation",c),Cetabo.EventDistpatcher.use(b).trigger("place.update",a)}})},updateIconProviderModelIfRequired:function(a){var b,c,d;d=this.iconProviderModel.valueOf(function(b){return void 0!==b&&b.imageSrc===a.get("icon")}),void 0===d&&(b=this.getChannel(),c={id:a.get("iconCustomId"),imageSrc:a.get("icon"),description:"Icon "+a.get("iconCustomName"),text:a.get("iconCustomName")},this.iconProviderModel.getData().push(c),Cetabo.EventDistpatcher.use(b).trigger("select2.update",c))},createAccordionElement:function(a){var b;return(b=Cetabo.TemplateManager.getTemplateByName("#template-place"))({id:a})},createAccordionElementDataModel:function(a){var b;return b=new Cetabo.PlaceModel({id:a,name:"",channel:this.getChannel(),details:"",type:"default",animation:"0"}),this.model.addPlace(a,b),b},afterElementRemoval:function(a){var b,c;c=this.model.getPlaceById(a),b=this.getChannel(),Cetabo.EventDistpatcher.use(b).trigger("place.remove",c),this.model.removePlace(a)},onExpand:function(a){var b,c;b=this.resolveAccordionIdByIndex(a),c=this.getPlaceById(b),this.updateContentEditor(c)},onPreexpand:function(a){var b,c,d;c=this.resolveAccordionIdByIndex(a),d=this.getPlaceById(c),void 0!==d&&(b=this.getChannel(),Cetabo.EventDistpatcher.use(b).trigger("content.change",d.get("details"),function(){}))},onClear:function(){var a;a=this.getChannel(),Cetabo.EventDistpatcher.use(a).trigger("content.hide")},updateContentEditor:function(a){var b;void 0!==a&&(b=this.getChannel(),Cetabo.EventDistpatcher.use(b).trigger("content.change",a.get("details"),function(b){a.set("details",b)}))}})}.call(this),function(){Cetabo.SettingsView=Cetabo.BaseView.extend({events:{},initialize:function(a){this.model=a.model,this.channel=a.channel,this.componentFactory=new Cetabo.ComponentFactory,this.initUIModel(),Cetabo.EventDistpatcher.use(this.channel).on("street.updateposition",this.onChangePagmanPosition,this),Cetabo.EventDistpatcher.use(this.channel).on("street.updatepov",this.onChangePagmanPov,this),Cetabo.EventDistpatcher.use(this.channel).on("map.updatecenter",this.onChangeMapPosition,this),Cetabo.EventDistpatcher.use(this.channel).on("map.updatezoom",this.onChangeMapZoom,this),Cetabo.EventDistpatcher.use(this.channel).on("map.load",this.onLoadMap,this),Cetabo.EventDistpatcher.use(this.channel).on("map.updatemode",this.onChangeMode,this)},initUIModel:function(){var a,b;b=this,this.componentFactory.create("spinner","lng",{el:this.findIdent(".lng"),step:1e-4,value:this.model.get("lng"),numberFormat:"n",onChange:function(a){b.model.set("lng",a),b.changedMapCenter()}}),this.componentFactory.create("spinner","lat",{el:this.findIdent(".lat"),step:1e-4,value:this.model.get("lat"),numberFormat:"n",onChange:function(a){b.model.set("lat",a),b.changedMapCenter()}}),this.componentFactory.create("slider","zoom",{el:this.findIdent(".zoom"),range:"max",min:0,max:21,value:this.model.get("zoom"),onChange:function(a){b.model.set("zoom",a),b.changeMapZoom()}}),a=this.model.get("zoomrange"),this.componentFactory.create("rangeslider","zoomrange",{el:this.findIdent(".zoomrange"),range:!0,values:[a.min,a.max],min:0,max:21,onChange:function(a){b.model.set("zoomrange",a),b.changeMapZoomRange()}}),this.componentFactory.create("input","width",{el:this.findIdent(".width"),value:this.model.get("width"),onChange:function(a){b.model.set("width",a),b.changeMapWidth()}}),this.componentFactory.create("input","height",{el:this.findIdent(".height"),value:this.model.get("height"),onChange:function(a){b.model.set("height",a),b.changeMapHeight()}}),this.componentFactory.create("select","type",{el:this.findIdent(".maptype"),provider:new Cetabo.MapTypeProviderModel,value:this.model.get("type"),onChange:function(a){b.model.set("type",a),b.changeMapType()}}),this.componentFactory.create("select","mode",{el:this.findIdent(".mapmode"),provider:new Cetabo.MapModeProvierModel,value:this.model.get("mode"),onChange:function(a){b.model.set("mode",a),b.changeMapMode()}}),this.componentFactory.create("spinner","heading",{el:this.findIdent(".heading"),step:1e-4,numberFormat:"n",min:-180,max:180,onChange:function(a){b.model.set("heading",a),b.changePagmantPov()}}),this.componentFactory.create("spinner","pitch",{el:this.findIdent(".pitch"),step:1e-4,numberFormat:"n",min:-90,max:90,onChange:function(a){b.model.set("pitch",a),b.changePagmantPov()}}),this.componentFactory.create("spinner","plng",{el:this.findIdent(".plng"),step:1e-4,numberFormat:"n",onChange:function(a){b.model.set("plng",a),b.changePagmanPosition()}}),this.componentFactory.create("spinner","plat",{el:this.findIdent(".plat"),step:1e-4,numberFormat:"n",onChange:function(a){b.model.set("plat",a),b.changePagmanPosition()}}),this.componentFactory.create("checkbox","overlayenable",{el:this.findIdent(".enable-custom-overlay"),onChange:function(a){b.model.set("overlayenable",a),b.updateOverlay()}}),this.componentFactory.create("checkbox","clustering",{el:this.findIdent(".clustering"),onChange:function(a){b.model.set("clustering",a),b.updateClustering()}}),this.componentFactory.create("checkbox","dragging",{el:this.findIdent(".dragging"),onChange:function(a){b.model.set("dragging",a),b.updateDragging()}}),this.componentFactory.create("checkbox","doubleclickzoom",{el:this.findIdent(".doubleclickzoom"),onChange:function(a){b.model.set("doubleclickzoom",a),b.updateDoubleClickZoom()}}),this.componentFactory.create("checkbox","scrollwellzoom",{el:this.findIdent(".scrollwellzoom"),onChange:function(a){b.model.set("scrollwellzoom",a),b.updateScrollWellZoom()}}),this.componentFactory.create("checkbox","zoomcontrol",{el:this.findIdent(".zoomcontrol-enabled"),onChange:function(a){b.model.set("zoomcontrol",a),b.updateZoomControl()}}),this.componentFactory.create("select","zoomcontrolposition",{el:this.findIdent(".zoomcontrol-position"),provider:new Cetabo.MapControlPostionProviderModel,value:this.model.get("zoomcontrolposition"),onChange:function(a){b.model.set("zoomcontrolposition",a),b.updateZoomControlPosition()}}),this.componentFactory.create("checkbox","streetviewcontrol",{el:this.findIdent(".streetviewcontrol-enabled"),onChange:function(a){b.model.set("streetviewcontrol",a),b.updateStreetViewControl()}}),this.componentFactory.create("select","streetviewcontrolposition",{el:this.findIdent(".streetviewcontrol-position"),provider:new Cetabo.MapControlPostionProviderModel,value:this.model.get("streetviewcontrolposition"),onChange:function(a){b.model.set("streetviewcontrolposition",a),b.updateStreetViewControlPosition()}}),this.componentFactory.create("checkbox","pancontrol",{el:this.findIdent(".pancontrol-enabled"),onChange:function(a){b.model.set("pancontrol",a),b.updatePanControl()}}),this.componentFactory.create("select","pancontrolposition",{el:this.findIdent(".pancontrol-position"),provider:new Cetabo.MapControlPostionProviderModel,value:this.model.get("pancontrolposition"),onChange:function(a){b.model.set("pancontrolposition",a),b.updatePanControlPosition()}}),this.componentFactory.create("checkbox","maptypecontrol",{el:this.findIdent(".maptypecontrol-enabled"),onChange:function(a){b.model.set("maptypecontrol",a),b.updateMapTypeControl()}}),this.componentFactory.create("select","maptypecontrolposition",{el:this.findIdent(".maptypecontrol-position"),provider:new Cetabo.MapControlPostionProviderModel,value:this.model.get("maptypecontrolposition"),onChange:function(a){b.model.set("maptypecontrolposition",a),b.updateMapTypeControlPosition()}}),this.componentFactory.create("checkbox","scalecontrol",{el:this.findIdent(".scalecontrol-enabled"),onChange:function(a){b.model.set("scalecontrol",a),b.updateScaleControl()}}),this.componentFactory.create("checkbox","overlaymultiple",{el:this.findIdent(".overlaymultiple"),onChange:function(a){b.model.set("overlaymultiple",a),b.updateOveralyMultiple()}}),this.componentFactory.create("checkbox","enabledirection",{el:this.findIdent(".enable-direction"),onChange:function(a){b.model.set("enabledirection",a),b.updateDirection()}}),this.componentFactory.create("checkbox","showsteps",{el:this.findIdent(".show-direction-steps"),onChange:function(a){b.model.set("showsteps",a),b.updateDirection()}}),this.componentFactory.create("checkbox","enabletags",{el:this.findIdent(".enable-tags"),onChange:function(a){b.model.set("enabletags",a),b.updateTags()}}),this.componentFactory.create("checkbox","enableplaces",{el:this.findIdent(".enable-places"),onChange:function(a){b.model.set("enableplaces",a),b.updatePlaces()}}),this.componentFactory.create("checkbox","enablefullscreen",{el:this.findIdent(".enable-fullscreen"),onChange:function(a){b.model.set("enablefullscreen",a),b.updateFullscreenMode()}}),this.componentFactory.create("checkbox","startfullscreen",{el:this.findIdent(".start-fullscreen"),onChange:function(a){b.model.set("startfullscreen",a)}}),this.componentFactory.create("checkbox","enableaddressearch",{el:this.findIdent(".enable-addres-search"),onChange:function(a){b.model.set("enableaddressearch",a),b.updateSearch()}}),this.componentFactory.create("select","defaultsidebartab",{el:this.findIdent(".default-sidebar-tab"),provider:new Cetabo.SidebarTypeProviderModel,value:this.model.get("defaultsidebartab"),onChange:function(a){b.model.set("defaultsidebartab",a)}})},changedMapCenter:function(){Cetabo.EventDistpatcher.use(this.channel).trigger("map.updatecenter",this.model.get("lat"),this.model.get("lng"))},updateFullscreenMode:function(){Cetabo.EventDistpatcher.use(this.channel).trigger("view.updatefullscreen",this.model.get("enablefullscreen"))},updateSearch:function(){Cetabo.EventDistpatcher.use(this.channel).trigger("view.updatesearch",this.model.get("enableaddressearch"))},changeMapWidth:function(){},changeMapHeight:function(){},changeMapType:function(){Cetabo.EventDistpatcher.use(this.channel).trigger("map.updatetype",this.model.get("type"))},changeMapMode:function(){Cetabo.EventDistpatcher.use(this.channel).trigger("map.updatemode",this.model.get("mode"))},changeMapZoom:function(){Cetabo.EventDistpatcher.use(this.channel).trigger("map.updatezoom",parseInt(this.model.get("zoom")))},changeMapZoomRange:function(){Cetabo.EventDistpatcher.use(this.channel).trigger("map.updatezoomrange",this.model.get("zoomrange"))},changePagmanPosition:function(){Cetabo.EventDistpatcher.use(this.channel).trigger("street.updateposition",this.model.get("plat"),this.model.get("plng"))},changePagmantPov:function(){Cetabo.EventDistpatcher.use(this.channel).trigger("street.updatepov",{heading:this.model.get("heading"),pitch:this.model.get("pitch")})},updateOverlay:function(){Cetabo.EventDistpatcher.use(this.channel).trigger("overlay.updated",this.model)},updateOveralyMultiple:function(){Cetabo.EventDistpatcher.use(this.channel).trigger("overlay.updated",this.model)},updateClustering:function(){Cetabo.EventDistpatcher.use(this.channel).trigger("place.cluster",this.model.get("clustering"))},updateDragging:function(){Cetabo.EventDistpatcher.use(this.channel).trigger("map.updatedragging",this.model.get("dragging"))},updateDoubleClickZoom:function(){Cetabo.EventDistpatcher.use(this.channel).trigger("map.updatedoubleclickzoom",this.model.get("doubleclickzoom"))},updateScrollWellZoom:function(){Cetabo.EventDistpatcher.use(this.channel).trigger("map.updatescrollwellzoom",this.model.get("scrollwellzoom"))},updateZoomControl:function(){Cetabo.EventDistpatcher.use(this.channel).trigger("map.updatezoomcontrol",this.model.get("zoomcontrol"))},updateZoomControlPosition:function(){Cetabo.EventDistpatcher.use(this.channel).trigger("map.updatezoomcontrolposition",this.model.get("zoomcontrolposition"))},updateStreetViewControl:function(){Cetabo.EventDistpatcher.use(this.channel).trigger("map.updatestreetviewcontrol",this.model.get("streetviewcontrol"))},updateStreetViewControlPosition:function(){Cetabo.EventDistpatcher.use(this.channel).trigger("map.updatestreetviewcontrolposition",this.model.get("streetviewcontrolposition"))},updatePanControl:function(){Cetabo.EventDistpatcher.use(this.channel).trigger("map.updatepancontrol",this.model.get("pancontrol"))},updatePanControlPosition:function(){Cetabo.EventDistpatcher.use(this.channel).trigger("map.updatepancontrolposition",this.model.get("pancontrolposition"))},updateMapTypeControl:function(){Cetabo.EventDistpatcher.use(this.channel).trigger("map.updatemaptypecontrol",this.model.get("maptypecontrol"))},updateMapTypeControlPosition:function(){Cetabo.EventDistpatcher.use(this.channel).trigger("map.updatemaptypecontrolposition",this.model.get("maptypecontrolposition"))},updateScaleControl:function(){Cetabo.EventDistpatcher.use(this.channel).trigger("map.updatescalecontrol",this.model.get("scalecontrol"))},updateDirection:function(){Cetabo.EventDistpatcher.use(this.channel).trigger("direction.stateupdate",this.model.get("enabledirection"))},updateTags:function(){Cetabo.EventDistpatcher.use(this.channel).trigger("tags.stateupdate",this.model.get("enabletags"))},updatePlaces:function(){Cetabo.EventDistpatcher.use(this.channel).trigger("places.stateupdate",this.model.get("enableplaces"))},onChangeMapPosition:function(a,b){this.model.set("lng",b),this.model.set("lat",a),this.componentFactory.setValue("lat",a),this.componentFactory.setValue("lng",b)},onChangePagmanPosition:function(a,b){this.model.set("streetlng",b),this.model.set("streetlat",a),this.componentFactory.setValue("plat",a),this.componentFactory.setValue("plng",b)},onChangePagmanPov:function(a){void 0!==a&&(this.model.set("heading",a.heading),this.model.set("pitch",a.pitch),this.componentFactory.setValue("heading",a.heading),this.componentFactory.setValue("pitch",a.pitch))},onChangeMapZoom:function(a){this.model.set("zoom",a),this.componentFactory.setValue("zoom",a)},onChangeMode:function(a){google.maps.MapMode.STREET===a?(this.find("#pov-details").show(),this.find("#pegman-details").show()):(this.find("#pov-details").hide(),this.find("#pegman-details").hide())},onLoadMap:function(a){this.componentFactory.setValue("type",a.get("type")),this.componentFactory.setValue("mode",a.get("mode")),this.componentFactory.setValue("width",a.get("width")),this.componentFactory.setValue("height",a.get("height")),this.componentFactory.setValue("overlayenable",a.get("overlayenable")),this.componentFactory.setValue("overlaymultiple",a.get("overlaymultiple")),this.componentFactory.setValue("clustering",a.get("clustering")),this.componentFactory.setValue("enabledirection",a.get("enabledirection")),this.componentFactory.setValue("enabletags",a.get("enabletags")),this.componentFactory.setValue("enableplaces",a.get("enableplaces")),this.componentFactory.setValue("showsteps",a.get("showsteps")),this.componentFactory.setValue("zoom",a.get("zoom")),this.componentFactory.setValue("zoomrange",a.get("zoomrange")),this.componentFactory.setValue("lat",a.get("lat")),this.componentFactory.setValue("lng",a.get("lng")),this.componentFactory.setValue("plat",a.get("streetlng")),this.componentFactory.setValue("plng",a.get("streetlat")),this.componentFactory.setValue("dragging",a.get("dragging")),this.componentFactory.setValue("doubleclickzoom",a.get("doubleclickzoom")),this.componentFactory.setValue("scrollwellzoom",a.get("scrollwellzoom")),this.componentFactory.setValue("zoomcontrol",a.get("zoomcontrol")),this.componentFactory.setValue("zoomcontrolposition",a.get("zoomcontrolposition")),this.componentFactory.setValue("streetviewcontrol",a.get("streetviewcontrol")),this.componentFactory.setValue("streetviewcontrolposition",a.get("streetviewcontrolposition")),this.componentFactory.setValue("pancontrol",a.get("pancontrol")),this.componentFactory.setValue("pancontrolposition",a.get("pancontrolposition")),this.componentFactory.setValue("maptypecontrol",a.get("maptypecontrol")),this.componentFactory.setValue("maptypecontrolposition",a.get("maptypecontrolposition")),this.componentFactory.setValue("scalecontrol",a.get("scalecontrol")),this.componentFactory.setValue("enablefullscreen",a.get("enablefullscreen")),this.componentFactory.setValue("startfullscreen",a.get("startfullscreen")),this.componentFactory.setValue("enableaddressearch",a.get("enableaddressearch")),this.componentFactory.setValue("defaultsidebartab",a.get("defaultsidebartab"))}})}.call(this),function(){Cetabo.Select2Adaptor=Cetabo.BaseView.extend({initialize:function(a){var b;this.config=a,b=this,a.provider.invoke(function(){b.fill()}),Cetabo.EventDistpatcher.use(a.channel).on("select2.update",this.onDataUpdate,this)},fill:function(){var a,b,c;a=this.config,b=a.provider.valueOf(function(b){return a.onMatchSelection(b)}),c=jQuery(a.el),this.refreshSelect2(c),void 0!==b&&(void 0!==b.id?c.select2("val",b.id):c.select2("val",a.provider.getDefault())),c.on("select2-selecting",function(b){a.onSelect(b.object)})},refreshSelect2:function(a){var b;b=this.config,a.select2("destroy"),a.select2({data:b.provider.getDataModel(),formatResult:function(a){return b.onFormatResult(a)},formatSelection:function(a){return b.onFormatSelection(a)},escapeMarkup:function(a){return a}},!0),this.updateEnabledState()},setEnabled:function(a){this.enabled=a,this.updateEnabledState()},updateEnabledState:function(){var a;a=jQuery(this.config.el),a.select2("enable",this.enabled)},onDataUpdate:function(a){var b;b=jQuery(this.config.el),void 0!==a&&(this.refreshSelect2(b),b.select2("val",a.id))}})}.call(this),function(){Cetabo.FileUploaderAdaptor=Cetabo.BaseView.extend({initialize:function(a){var b,c;b=void 0,c=wp.media.model.settings.post.id,jQuery(a.el).live("click",function(d){return d.preventDefault(),b?void b.open():(b=wp.media.frames.file_frame=wp.media({title:jQuery(this).data("uploader_title"),library:{type:"image"},button:{text:jQuery(this).data("uploader_button_text")},multiple:!1}),b.on("select",function(){var d;d=b.state().get("selection").first().toJSON(),a.onSelectAttachment(d),wp.media.model.settings.post.id=c}),void b.open())}),jQuery("a.add_media").on("click",function(){wp.media.model.settings.post.id=c})}})}.call(this),function(){Cetabo.AbstractComponent=Cetabo.BaseView.extend({initialize:function(a){this.state=a,this.state.value&&this.setValue(this.state.value),this.create(),this.setEnabled(this.isEnabled()),this.created=!0},setValue:function(a){var b;b=this.value===a,this.value=a,b||this.onChangeValue()},isEnabled:function(){var a,b;return a=jQuery(this.state.el).hasClass("c_DUMMY_AAA123AAA"),b=jQuery(this.state.el).closest(".c_DUMMY_AAA123AAA").length>0,!(a||b)},onChangeValue:function(){},getValue:function(){return this.value}})}.call(this),function(){Cetabo.Select=Cetabo.AbstractComponent.extend({create:function(){var a;a=this,this._instance=new Cetabo.Select2Adaptor({el:this.state.el,provider:this.state.provider,onMatchSelection:function(b){return void 0!==b&&b.id===a.getValue()},onFormatResult:function(a){return"<div class='c-selector'>"+a.text+"<div class='description'>"+a.description+"</div></div>"},onFormatSelection:function(a){return a.text},onSelect:function(b){a.onUpdateValue(b.id,b)}})},setEnabled:function(a){this._instance.setEnabled(a)},onChangeValue:function(){jQuery(this.state.el).select2("val",this.value)},onUpdateValue:function(a,b){this.setValue(a),null!=this.state.onChange&&this.state.onChange(a,b)}})}.call(this),function(){Cetabo.Spinner=Cetabo.AbstractComponent.extend({create:function(){var a;a=this,this._instance=jQuery(this.state.el).spinner({step:this.state.step,numberFormat:this.state.format,min:this.state.min,max:this.state.max,change:function(){var b;b=jQuery(this).val(),a.onUpdateValue(b)},stop:function(){var b;b=jQuery(this).val(),a.onUpdateValue(b)}})},onChangeValue:function(){jQuery(this.state.el).val(this.value)},setEnabled:function(a){jQuery(this.state.el).spinner(a?"enable":"disable")},onUpdateValue:function(a){this.setValue(a),null!=this.state.onChange&&this.state.onChange(a)}})}.call(this),function(){Cetabo.Checkbox=Cetabo.AbstractComponent.extend({create:function(){var a;a=this,this._instance=jQuery(this.state.el).iCheck({checkboxClass:"icheckbox_minimal",radioClass:"iradio_minimal"}).on("ifChanged",function(){a.onUpdateValue(this.checked)})},onChangeValue:function(){jQuery(this.state.el).iCheck(this.value?"check":"uncheck")},setEnabled:function(a){jQuery(this.state.el).iCheck(a?"enable":"disable")},onUpdateValue:function(a){this.setValue(a),null!=this.state.onChange&&this.state.onChange(a)}})}.call(this),function(){Cetabo.Slider=Cetabo.AbstractComponent.extend({create:function(){var a;a=this,this._instance=jQuery(this.state.el).slider({range:this.state.range,min:this.state.min,max:this.state.max,value:this.state.value,slide:function(b,c){var d;d=c.value,a.onUpdateValue(d)}})},onChangeValue:function(){this.created&&jQuery(this.state.el).slider("value",this.value)},setEnabled:function(a){jQuery(this.state.el).slider(a?"enable":"disable")},onUpdateValue:function(a){this.setValue(a),null!=this.state.onChange&&this.state.onChange(a)}})}.call(this),function(){Cetabo.RangeSlider=Cetabo.AbstractComponent.extend({create:function(){var a;a=this,this._instance=jQuery(this.state.el).slider({range:this.state.range,min:this.state.min,max:this.state.max,values:this.state.values,slide:function(b,c){var d,e;e=c.values[0],d=c.values[1],a.onUpdateValue({min:e,max:d})}})},onChangeValue:function(){this.created&&jQuery(this.state.el).slider("values",[this.value.min,this.value.max])},setEnabled:function(a){jQuery(this.state.el).slider(a?"enable":"disable")},onUpdateValue:function(a){this.setValue(a),null!=this.state.onChange&&this.state.onChange(a)}})}.call(this),function(){Cetabo.Input=Cetabo.AbstractComponent.extend({create:function(){var a;a=this,this._instance=jQuery(this.state.el).change(function(){var b;b=jQuery(this).val(),a.onUpdateValue(b)}),this._instance.val(this.state.value)},onChangeValue:function(){jQuery(this.state.el).val(this.value)},setEnabled:function(){},onUpdateValue:function(a){this.setValue(a),null!=this.state.onChange&&this.state.onChange(a)}})}.call(this),function(){Cetabo.ComponentFactory=Cetabo.BaseView.extend({components:{},create:function(a,b,c){switch(a){case"input":this.components[b]=new Cetabo.Input(c);break;case"checkbox":this.components[b]=new Cetabo.Checkbox(c);break;case"rangeslider":this.components[b]=new Cetabo.RangeSlider(c);break;case"select":this.components[b]=new Cetabo.Select(c);break;case"slider":this.components[b]=new Cetabo.Slider(c);break;case"spinner":this.components[b]=new Cetabo.Spinner(c)}},instance:function(a){return this.components[a]},setValue:function(a,b){this.components[a].setValue(b)},getValue:function(a){return this.components[a].getValue()}})}.call(this),function(){Cetabo.EditableMapView=Cetabo.MapView.extend({events:function(){return _.extend({},Cetabo.MapView.prototype.events,{"click .save":"save","click .edit":"edit","click .clone":"clone","click .tab-place":"switchOnPlace","click .tab-settings":"switchOnSettings","click .tab-style":"switchOnStyle","click .tab-direction":"switchOnDirection","click .export":"export"})},initialize:function(a){Cetabo.EditableMapView.__super__.initialize.apply(this,arguments),this.initMapNameInput(),a.readonly||(this.initSubViews(),this.initNotificationManager(),this.initOverlayManager(),this.initTabControl(),this.initAddressPicker(),this.initContentManager(),Cetabo.EventDistpatcher.use(this.getChannel()).on("map.loaded",this.onMapLoaded,this),Cetabo.EventDistpatcher.use(this.getChannel()).trigger("map.load",this.model))},initSubViews:function(){this.placesView=new Cetabo.PlacesView({el:"#controll-place",model:this.model,channel:this.getChannel(),baseURL:this.config.baseURL}),this.settingsView=new Cetabo.SettingsView({el:"#controll-settings",model:this.model,channel:this.getChannel()}),this.stylerView=new Cetabo.StylerView({el:"#controll-style",model:this.model,url:this.getConfiguration().url,channel:this.getChannel()}),this.find(".fullscreen").hide()},switchOnPlace:function(){this.placesView.refresh(),Cetabo.EventDistpatcher.use(this.getChannel()).trigger("content.show")},switchOnSettings:function(){Cetabo.EventDistpatcher.use(this.getChannel()).trigger("content.hide")},switchOnStyle:function(){this.stylerView.refresh(),Cetabo.EventDistpatcher.use(this.getChannel()).trigger("content.hide")},switchOnDirection:function(){Cetabo.EventDistpatcher.use(this.getChannel()).trigger("content.hide")},getDefaultModelState:function(){var a;return a=this.getChannel(),{readonly:this.isReadOnly(),channel:a,zoom:2,zoomrange:{min:2,max:18},width:"800px",height:"600px",lat:41.552409812870664,lng:12.88751972656244,type:google.maps.MapTypeId.ROADMAP,mode:google.maps.MapMode.MAP,dragging:!0,doubleclickzoom:!0,scrollwellzoom:!0,maptypecontrol:!1,maptypecontrolposition:google.maps.ControlPosition.TOP_RIGHT,pancontrol:!1,pancontrolposition:google.maps.ControlPosition.TOP_RIGHT,scalecontrol:!0,streetviewcontrol:!0,streetviewcontrolposition:google.maps.ControlPosition.TOP_RIGHT,zoomcontrol:!0,zoomcontrolposition:google.maps.ControlPosition.TOP_RIGHT,defaultsidebartab:0,heading:34,pitch:10,enablefullscreen:!1,startfullscreen:!1,enableaddressearch:!1,enabledirection:!1,enabletags:!1,enableplaces:!1,travelmode:!1,showsteps:!0,tracking:!1,trackinginterval:1e3,overalyenable:!1,overlaymultiple:!0,overlay_arrowshahowstyle:0,overlay_padding:10,overlay_borderradius:10,overlay_borderwidth:1,overlay_bordercolor:"#CCC",overlay_backgroundcolor:"#FFF",overlay_minwidth:0,overlay_maxwidth:300,overlay_minheight:0,overlay_maxheight:0,overlay_arrowsize:15,overlay_arrowposition:50,overlay_arrowstyle:0,clustering:!1}},initNotificationManager:function(){var a;a=this.getChannel(),this.notificationsManager=new Cetabo.NotificationsManager({channel:a})},initContentManager:function(){var a;a=this.getChannel(),this.contentManger=new Cetabo.ContentManager({channel:a,el:"___hiddenEditor___"})},initOverlayManager:function(){var a;a=this.getChannel(),this.overlayManager=new Cetabo.OverlayManager({channel:a})},getMapConfiguration:function(){var a;return a=this.enforceELId(this.find(".map-canvas")),{el:a,readonly:this.isReadOnly(),channel:this.getChannel(),baseURL:this.config.baseURL}},initTabControl:function(){this.find("#cmap-tabs-container").tabs({active:-1}),this.isReadOnly()&&this.find("#cmap-tabs-container").hide()},initMapNameInput:function(){var a;a=this.model,this.find(".name").change(function(){var b;b=jQuery(this).val(),a.set("name",b)}),this.find(".name").prop("disabled",this.isReadOnly())},initAddressPicker:function(){var a,b;a=this.getChannel(),b=this,this.addresspicker=this.find(".addresspicker").addresspicker({updateCallback:function(c,d){var e,f;Cetabo.EventDistpatcher.use(a).trigger("map.updatecenter",d.lat,d.lng),Cetabo.EventDistpatcher.use(a).trigger("map.updatezoom",15),f=b.placesView.addNew(),e=b.model.getPlaceById(f),e.set("lat",d.lat),e.set("lng",d.lng),e.set("name",c.label),b.placesView.initNameInput(e)}})},onLoadMapCallback:function(a){Cetabo.EditableMapView.__super__.onLoadMapCallback.apply(this,arguments),this.find(".name").val(a.get("name"))},save:function(){var a;a=this,this.persist(this.getSaveURL(),function(){return a.getSaveCallbacks()})},clone:function(){var a;a=this,this.persist(this.getCloneURL(),function(){return a.getSaveCallbacks()})},persist:function(a,b){var c,d,e;if(c=this.getChannel(),e=this.model.validate(),e.hasError)for(Cetabo.EventDistpatcher.use(c).trigger("notification.show",e.messages.join(" <br/>")),d=0;d<e.fields.length;)this.highlightField(e.fields[d]),d++;else Cetabo.EventDistpatcher.use(c).trigger("overlay.show"),Cetabo.EventDistpatcher.use(c).trigger("backend.send",{url:a,content:this.model.toJSON(),callback:b()})},highlightField:function(a){this.find(""+a).addClass("invalid").delay(8e3).queue(function(a){jQuery(this).removeClass("invalid"),a()})},getSaveURL:function(){return this.getConfiguration().url.save},getCloneURL:function(){return this.getConfiguration().url.clone},getBackURL:function(){return this.getConfiguration().url.back},getExportURL:function(){return this.getConfiguration().url["export"]},isReadOnly:function(){return this.getConfiguration().readonly},getSaveCallbacks:function(){var a,b,c;return b=this.getChannel(),c=this,a={success:function(a){c.onSaveSuccess(a,b)},error:function(a){c.onSaveError(a,b)}}},getExportCallbaks:function(){var a,b,c;return b=this.getChannel(),c=this,a={success:function(a){c.onExportSuccess(a,b)},error:function(a){c.onSaveError(a,b)}}},onSaveSuccess:function(a,b){var c;a.success?(Cetabo.EventDistpatcher.use(b).trigger("notification.show","Map successfully saved"),c=this.getConfiguration().url.back,setInterval(function(){window.location.replace(c)},2e3)):Cetabo.EventDistpatcher.use(b).trigger("notification.show","An error has occurred")},onExportSuccess:function(a,b){var c;a.success?(c=this.getConfiguration().url["export"],setInterval(function(){window.location.replace(c)},2e3)):Cetabo.EventDistpatcher.use(b).trigger("notification.show","An error has occurred")},onSaveError:function(a,b){Cetabo.EventDistpatcher.use(b).trigger("notification.show","An critical error has occurred")},edit:function(){window.location.replace(this.getConfiguration().url.edit)},onUpdateMapSize:function(a,b){this.isReadOnly()&&this.find(".cmap-container").width(a).height(b)},loadModel:function(){Cetabo.EditableMapView.__super__.loadModel.apply(this,arguments),Cetabo.EventDistpatcher.use(this.getChannel()).trigger("overlay.show")},onMapLoaded:function(){var a;a=this.getChannel(),setTimeout(function(){return Cetabo.EventDistpatcher.use(a).trigger("overlay.hide")},2e3)},"export":function(){var a;a=this,this.persist(this.getSaveURL(),function(){return a.getExportCallbaks()})}})}.call(this),function(){jQuery(function(){"function"==typeof __cetaboMapBootstrap&&__cetaboMapBootstrap(),jQuery("body").tooltip({selector:".c_DUMMY_AAA123AAA",title:"This feature is avaialble only in full version.",placement:"left"}),jQuery(".c_DUMMY_AAA123AAA").tooltip({container:"body",title:"This feature is avaialble only in full version.",placement:"left"})
})}.call(this);